# 更新日志

## [2026-01-30]

### 新增功能
- **首页分段控制器**: 新增首页/系统分段控制器，支持固定卡片与后台控制卡片切换
- **时间段问候语**: 在首页工具栏左侧添加基于时间的问候语（早上好/下午好/晚上好）
- **移动端标题动画**: 探索页面移动端顶部栏标题支持左右滑动动画效果

### 优化与改进
- **MusicView表格优化**:
  - 移除空列表格列，优化布局空间
  - 对齐分页组件与"歌曲"标题位置
  - 表格顶部显示当前播放列表名称
- **分段控制器交互**:
  - 滚动时自动将分段控制器移动到顶部栏，带平滑动画
  - 统一分段控制器圆角样式，保持尺寸一致性
  - 优化滑块对齐和大小匹配
- **移动端体验**:
  - 当分段控制器在顶部栏显示时，自动隐藏左侧标题
  - 标题显示/隐藏时添加流畅的左右滑动动画
 - 列表页面返回保留滚动位置：启用 KeepAlive 并按路径分离实例（key=route.path）
 - 顶部栏返回按钮统一采用后退行为（router.back），与浏览器返回一致
 - KeepAlive include 覆盖首页/音乐/应用/更新/专题及排行榜、AppCardView
 - 限制缓存实例数为 20，避免过多详情页占用内存

### 修复
- **CSS语法错误**: 修复App.vue中缺失的样式块闭合括号
- **样式冲突**: 解决分段控制器滑块对齐问题

## [2026-01-23]

### 新增功能
- 应用投稿流程分步提交：保存 → 预览 → 最终提交，提供明确指引与状态反馈
- 管理端待审核投稿支持编辑：复用应用列表的编辑表单，仅允许“待审核”状态编辑
- 系统健康检查接口：新增主服务 `/api/v0/charts/rating` 与副服务 `/next-api/apps/devices` 健康检查端点
- 下载增长对比图：新增包名过滤，默认排除“雷速体育” com.leisu.yuan
- 首页音乐卡片移动端适配：显示“打开”入口，胶囊按钮支持自动换行，避免被图片遮挡

### 优化与改进
- 系统状态监控：主服务检测路径改为 `/v0/charts/rating`，提升监控准确性
- 提交页面样式：默认折叠、折叠标题溢出处理（省略展示），整体样式与卡片融合
- 提交表单文案：移除“每5分钟仅可提交一次”提示，由后端频率控制触发提示

### 修复
- 监控页面 404：补充健康检查端点，修复状态描述异常
- 编译错误：移除未使用导入，修复 TS6133
- 后端路由：移除重复的 `app.post('/api/apps')` 定义，避免冲突
- 投稿限制：更新为“10分钟内最多提交 5 次”，仅在超限时提示
- 重复投稿：根据应用名称校验既有收录与待审核投稿，避免重复提交

## [2026-01-22]

### 新增功能
- **系统状态监控页面**: 新增了详细的系统状态监控页面 (`/system-status`)，用于实时监控主 API 和副 API 服务的健康状态。
  - 支持自动刷新（每 30 秒）。
  - 显示响应时间、最后检测时间和详细的状态描述。
  - 即使在 API 异常时也能提供友好的状态提示。
- **系统状态卡片**: 在首页侧边栏添加了系统状态概览卡片，点击可跳转至详细监控页面。

### 优化与改进
- **UI/UX 调整**:
  - 移除了系统状态卡片标题旁边的箭头图标，使界面更简洁。
  - 调整了监控页面中各卡片和标题的间距，提升视觉体验。
  - 优化了“立即检测”按钮的布局，使其在移动端和桌面端都独占一行全宽显示，便于操作。
- **配置更新**:
  - 将“Next API 服务”更名为“副 API 服务”，统一命名规范。
  - 优化了 API 健康检查逻辑，通过代理路径避免跨域问题，提高检测准确性。

### 修复
- 修复了构建过程中因未使用导入 (`Link`) 导致的 TypeScript 编译错误。
